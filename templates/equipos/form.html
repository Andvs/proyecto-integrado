{% extends "inicio.html" %}

{% block page_title %}{% if modo == "crear" %}Nuevo equipo{% else %}Editar equipo{% endif %}{% endblock %}

{% block main %}
<div class="container-fluid" style="max-width: 800px;">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">{% if modo == "crear" %}Crear equipo{% else %}Editar equipo{% endif %}</h4>
    <a href="{% url 'equipos_lista' %}" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left"></i> Volver
    </a>
  </div>

  <form method="post" class="card card-soft p-4">
    {% csrf_token %}

    <div class="row g-3">
      <!-- Nombre del equipo -->
      <div class="col-12">
        <label class="form-label">Nombre del equipo <span class="text-danger">*</span></label>
        <input type="text" name="nombre" class="form-control" 
              placeholder="Ej: Lobos, Tigres, Águilas..."
              value="{% if equipo %}{{ equipo.nombre }}{% endif %}" required>
        <div class="form-text">El nombre debe ser único dentro de la categoría.</div>
      </div>

      <!-- Categoría -->
      <div class="col-12 col-md-6">
        <label class="form-label">Categoría <span class="text-danger">*</span></label>
        <select name="categoria" class="form-select" required>
          <option value="">— Selecciona una categoría —</option>
          {% for cat in categorias %}
            <option value="{{ cat.id }}" 
                    {% if equipo and equipo.categoria.id == cat.id %}selected{% endif %}>
              {{ cat.descripcion|default:cat.slug }}
            </option>
          {% endfor %}
        </select>
        <div class="form-text">Ejemplo: Sub-14, Sub-16, Adulto, etc.</div>
      </div>

      <!-- Entrenador -->
      <div class="col-12 col-md-6">
        <label class="form-label">Entrenador <span class="text-danger">*</span></label>
        <select name="entrenador" class="form-select" required>
          <option value="">— Selecciona un entrenador —</option>
          {% for ent in entrenadores %}
            <option value="{{ ent.id }}" 
                    {% if equipo and equipo.entrenador.id == ent.id %}selected{% endif %}>
              {{ ent.nombre_completo }}
            </option>
          {% endfor %}
        </select>
        <div class="form-text">Solo aparecen entrenadores activos.</div>
      </div>
    </div>

    <div class="mt-4 d-flex gap-2">
      <button type="submit" class="btn btn-primary">
        {% if modo == "crear" %}
          <i class="bi bi-check2-circle"></i> Crear equipo
        {% else %}
          <i class="bi bi-save"></i> Guardar cambios
        {% endif %}
      </button>
      <a href="{% url 'equipos_lista' %}" class="btn btn-outline-secondary">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}