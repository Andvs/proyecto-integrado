{% extends "inicio.html" %}
{% load static %}

{% block page_title %}Dashboard{% endblock %}

{% block main %}
<h2 class="mb-3">Dashboard</h2>
<p class="text-muted">Hoy: {{ hoy }}</p>

{% if user.is_superuser or user.perfil.tipo == "ADMIN" or user.perfil.tipo == "EQUIP" %}
  <div class="row g-3">
    <div class="col-md-4">
      <div class="card p-3 shadow-sm">
        <h5>Total de equipos</h5>
        <div class="display-6">{{ total_equipos }}</div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card p-3 shadow-sm">
        <h5>Total de actividades</h5>
        <div class="display-6">{{ total_actividades }}</div>
      </div>
    </div>
  </div>

  <h4 class="mt-4">Actividades próximas</h4>
  <ul class="list-group">
    {% for act in actividades_proximas %}
      <li class="list-group-item d-flex justify-content-between">
        <span>{{ act.titulo }} — {{ act.get_tipo_display }}</span>
        <small>{{ act.fecha_inicio }} → {{ act.fecha_fin }}</small>
      </li>
    {% empty %}
      <li class="list-group-item">No hay actividades próximas.</li>
    {% endfor %}
  </ul>

{% elif user.perfil.tipo == "ENTRE" %}
  <h4>Mis equipos</h4>
  <ul class="list-group mb-3">
    {% for eq in mis_equipos %}
      <li class="list-group-item">{{ eq.nombre }} ({{ eq.categoria }})</li>
    {% empty %}
      <li class="list-group-item">Aún no tienes equipos asignados.</li>
    {% endfor %}
  </ul>

  <h4>Actividades próximas</h4>
  <ul class="list-group">
    {% for act in actividades_proximas %}
      <li class="list-group-item d-flex justify-content-between">
        <span>{{ act.titulo }} — {{ act.get_tipo_display }}</span>
        <small>{{ act.fecha_inicio }}</small>
      </li>
    {% empty %}
      <li class="list-group-item">No hay actividades próximas.</li>
    {% endfor %}
  </ul>

{% elif user.perfil.tipo == "JUGAD" %}
  <h4>Mis próximas actividades</h4>
  <ul class="list-group mb-3">
    {% for act in actividades_proximas %}
      <li class="list-group-item d-flex justify-content-between">
        <span>{{ act.titulo }} — {{ act.get_tipo_display }}</span>
        <small>{{ act.fecha_inicio }}</small>
      </li>
    {% empty %}
      <li class="list-group-item">No hay actividades próximas.</li>
    {% endfor %}
  </ul>

  <h4>Entrenamientos próximos</h4>
  <ul class="list-group">
    {% for act in entrenamientos_proximos %}
      <li class="list-group-item d-flex justify-content-between">
        <span>{{ act.titulo }}</span>
        <small>{{ act.fecha_inicio }}</small>
      </li>
    {% empty %}
      <li class="list-group-item">No hay entrenamientos próximos.</li>
    {% endfor %}
  </ul>

{% elif user.perfil.tipo == "SOCIO" %}
  <div class="alert alert-info">Contenido para socios (personaliza aquí).</div>

{% else %}
  <div class="alert alert-warning">
    No se reconoce tu tipo de perfil. Contacta al administrador.
  </div>
{% endif %}
{% endblock %}

